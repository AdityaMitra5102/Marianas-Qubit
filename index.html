<!DOCTYPE html>
<html>
<head>
  <title>Connection Status</title>
</head>
<body>
       <img src="http://local.mariana/favicon.ico"
     onload="console.log('Device is online!')"
     onerror="console.log('Device is offline or unreachable.')">
  <div id="status">Not connected</div>
  <script>
    async function checkConnections() {
      let status = [];
      
      // Check local server
      try {
        const localResponse = await fetch(`http://localhost:8000/active?cacheBust=${Date.now()}`);
        const localText = await localResponse.text();
        if (localText.trim() === 'true') {
          status.push('Connected via local client');
        }
      } catch (e) {
        // Local connection failed, do nothing
      }
      try {
        const localResponse = await fetch(`http://10.55.0.1/active?cacheBust=${Date.now()}`);
        const localText = await localResponse.text();
        if (localText.trim() === 'true') {
          status.push('Connected via external client');
        }
      } catch (e) {
        // Local connection failed, do nothing
      }
      // Check RPi DNS reachability


      
      // Update status div
      const statusDiv = document.getElementById('status');
      statusDiv.textContent = status.length > 0 ? status.join(', ') : 'Not connected';
    }
    
    // Run immediately and then every 5 seconds
    checkConnections();
    setInterval(checkConnections, 5000);
  </script>
</body>
</html>
